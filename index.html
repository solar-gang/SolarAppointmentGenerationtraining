<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>LOS Training Hub</title>
  <meta name="theme-color" content="#0b1017"/>

  <!--
    ✅ REQUIRED REPO FILES:
      /index.html
      /assets/logo.png
      /docs/Yucaipa.pdf
      /docs/Add-on-bill.pdf
      /docs/Laminate-1-2.pdf

    ✅ HOW THE BILL VIEWER WORKS:
    - The PDFs load INSIDE the same page in an iframe.
    - A "page slider" changes pages without leaving the window.
    - We also show "Important details" callouts beside the viewer.
  -->

  <style>
    :root{
      /* ===== LOS logo vibe ===== */
      --ink:#0b1017;
      --muted:#5c6775;
      --bg:#ffffff;
      --card:#ffffff;
      --line:#e7ecf2;

      --gold:#FBC909;
      --teal:#3AADBB;
      --cyan:#17B9FF;
      --lime:#9BE63A;

      --shadow: 0 14px 44px rgba(10,20,40,.12);
      --r:16px;
      --r2:22px;

      --safeT: env(safe-area-inset-top);
      --safeB: env(safe-area-inset-bottom);
      --safeL: env(safe-area-inset-left);
      --safeR: env(safe-area-inset-right);
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif}
    a{color:inherit}
    .container{max-width:1200px;margin:0 auto;padding:16px;padding-left:calc(16px + var(--safeL));padding-right:calc(16px + var(--safeR));padding-bottom:calc(16px + var(--safeB))}

    /* Topbar */
    .topbar{
      position:sticky;top:0;z-index:50;
      background:rgba(255,255,255,.90);
      backdrop-filter: blur(12px);
      border-bottom:1px solid var(--line);
      padding:12px 14px;
      padding-top:calc(12px + var(--safeT));
      display:flex;gap:12px;align-items:center;justify-content:space-between;
    }
    .brand{display:flex;gap:10px;align-items:center;min-width:240px}
    .logo{width:42px;height:42px;object-fit:contain;border-radius:12px;border:1px solid var(--line);background:#fff}
    .brandTitle{font-weight:950;letter-spacing:.2px}
    .brandSub{font-size:12px;color:var(--muted);margin-top:2px}
    .nav{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;align-items:center}
    .nav a{
      text-decoration:none;
      font-size:14px;color:var(--muted);
      padding:9px 12px;border-radius:999px;border:1px solid var(--line);
      background:#fff;
      transition:transform .12s ease, border-color .12s ease, color .12s ease;
      white-space:nowrap;
    }
    .nav a:hover{border-color:#cfd8e3;color:var(--ink);transform:translateY(-1px)}
    .nav a.active{color:var(--ink);border-color:rgba(58,173,187,.55);box-shadow:0 10px 24px rgba(58,173,187,.12)}

    /* Hero */
    .hero{
      margin-top:14px;
      border:1px solid var(--line);
      border-radius:var(--r2);
      box-shadow:var(--shadow);
      padding:16px;
      background:
        radial-gradient(1000px 520px at 12% 0%, rgba(251,201,9,.22), transparent 55%),
        radial-gradient(900px 520px at 88% 10%, rgba(58,173,187,.18), transparent 55%),
        linear-gradient(135deg, rgba(251,201,9,.12), rgba(58,173,187,.10));
    }
    .hero h1{margin:0 0 8px;font-size:24px}
    .hero p{margin:0;color:var(--muted);line-height:1.45}
    .pillRow{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
    .pill{font-size:12px;padding:7px 10px;border-radius:999px;border:1px solid var(--line);background:#fff;color:var(--muted)}

    /* Layout */
    .grid{
      margin-top:12px;
      display:grid;
      grid-template-columns:repeat(12,1fr);
      gap:12px;
    }
    .card{
      grid-column:span 12;
      border:1px solid var(--line);
      border-radius:var(--r2);
      background:var(--card);
      box-shadow:var(--shadow);
      padding:14px;
    }
    .cardHeader{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
    .cardTitle{font-weight:950;margin:0;font-size:18px}
    .tag{
      font-size:12px;color:var(--muted);
      border:1px solid var(--line);
      border-radius:999px;
      padding:7px 10px;
      background:#fff;
      white-space:nowrap;
    }
    .cardText{color:var(--muted);line-height:1.45;margin-top:8px}
    .divider{height:1px;background:var(--line);margin:12px 0}

    /* Viewer */
    .viewerWrap{display:grid;gap:12px}
    .viewerHeader{
      display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;
    }
    .selectRow{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    select{
      appearance:none;
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
      background:#fff;
      color:var(--ink);
      box-shadow:0 8px 18px rgba(10,20,40,.06);
    }
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
    .btn{
      border:1px solid var(--line);
      background:#fff;
      color:var(--ink);
      padding:10px 12px;
      border-radius:12px;
      font-weight:900;
      cursor:pointer;
      box-shadow:0 8px 18px rgba(10,20,40,.06);
      transition:transform .12s ease, border-color .12s ease;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px);border-color:#cfd8e3}
    .btnPrimary{
      background:linear-gradient(135deg,var(--gold),var(--teal));
      border-color:transparent;
    }
    .btnPrimary:hover{border-color:transparent}
    .btnSmall{padding:8px 10px;border-radius:10px;font-weight:900}
    .pageRow{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    input[type="range"]{width:220px}
    .pagePill{
      font-size:12px;color:var(--muted);
      border:1px solid var(--line);
      border-radius:999px;
      padding:7px 10px;
      background:#fff;
      white-space:nowrap;
    }

    .pdfShell{
      border:1px solid var(--line);
      border-radius:var(--r2);
      overflow:hidden;
      background:#0b1017;
      box-shadow:var(--shadow);
      height:62vh; /* stays in one window */
      min-height:420px;
      position:relative;
    }
    .pdfShell iframe{
      width:100%;
      height:100%;
      border:0;
      background:#0b1017;
    }

    /* Callouts */
    .callouts{
      border:1px solid var(--line);
      border-radius:var(--r2);
      background:#fff;
      box-shadow:var(--shadow);
      padding:14px;
    }
    .callouts h3{margin:0 0 8px;font-size:16px}
    .callouts p{margin:0;color:var(--muted);line-height:1.45}
    .calloutList{margin:10px 0 0 0;padding:0;list-style:none;display:grid;gap:10px}
    .calloutItem{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:
        radial-gradient(600px 220px at 0% 0%, rgba(251,201,9,.10), transparent 55%),
        radial-gradient(600px 220px at 100% 0%, rgba(58,173,187,.08), transparent 55%),
        #fff;
    }
    .calloutItem b{color:var(--ink)}
    .calloutItem small{display:block;color:var(--muted);margin-top:6px;line-height:1.35}

    /* Training blocks */
    details.training{
      border:1px solid var(--line);
      border-radius:14px;
      background:#fff;
      overflow:hidden;
    }
    details.training + details.training{margin-top:10px}
    details.training summary{
      list-style:none;
      cursor:pointer;
      padding:12px 12px;
      display:flex;gap:10px;align-items:flex-start;justify-content:space-between;
      user-select:none;
      font-weight:950;
    }
    details.training summary::-webkit-details-marker{display:none}
    .left{display:flex;gap:10px;align-items:flex-start}
    .dot{
      width:10px;height:10px;border-radius:999px;margin-top:5px;
      background:linear-gradient(135deg,var(--gold),var(--teal));
      box-shadow:0 10px 20px rgba(58,173,187,.14);
      flex:0 0 auto;
    }
    .caret{
      width:10px;height:10px;border-right:2px solid #9aa6b2;border-bottom:2px solid #9aa6b2;
      transform:rotate(45deg);
      margin-top:6px;
      transition:transform .12s ease;
      flex:0 0 auto;
    }
    details[open] .caret{transform:rotate(225deg);margin-top:10px}
    .body{padding:0 12px 12px 12px;color:var(--muted);line-height:1.45}
    .body ul{margin:8px 0 0 18px}
    .body li{margin:7px 0}

    .footer{
      margin:16px 0 10px;
      color:var(--muted);
      font-size:12px;
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;
    }

    /* Desktop layout */
    @media (min-width: 980px){
      .hero h1{font-size:30px}
      .viewerWrap{
        grid-template-columns: 7fr 5fr; /* viewer + callouts */
        align-items:start;
      }
      .pdfShell{height:70vh;min-height:520px}
    }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <img src="assets/logo.png" class="logo" alt="Leverage Our Sun"/>
      <div>
        <div class="brandTitle">LOS Training Hub</div>
        <div class="brandSub">Read the bill → teach the problem → book the consult</div>
      </div>
    </div>

    <nav class="nav" id="nav">
      <a href="#bill" class="active">Bill Knowledge</a>
      <a href="#approach">Approach</a>
      <a href="#self">Self Improvement</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Everything stays in one window.</h1>
      <p>
        Select a bill type, then use the page controls to move through the PDF inside the viewer.
        The right side shows the key callouts for what matters on that bill.
      </p>
      <div class="pillRow">
        <span class="pill">PDF viewer (same page)</span>
        <span class="pill">Page controls</span>
        <span class="pill">Mobile + desktop</span>
      </div>
    </section>

    <!-- BILL KNOWLEDGE -->
    <section class="grid">
      <section class="card" id="bill">
        <div class="cardHeader">
          <h2 class="cardTitle">Bill Knowledge / Problem</h2>
          <span class="tag">Use this at the door</span>
        </div>
        <p class="cardText">
          Teach the homeowner the bill: usage, TOU, tiers, and where charges come from.
          Then transition: “Let’s schedule a 30–45 minute consult to verify savings.”
        </p>

        <div class="divider"></div>

        <div class="viewerWrap">
          <!-- LEFT: PDF viewer + controls -->
          <div>
            <div class="viewerHeader">
              <div class="selectRow">
                <select id="billSelect" aria-label="Choose a bill PDF">
                  <option value="docs/Yucaipa.pdf" data-pages="6" selected>Yucaipa – Standard SCE bill (example)</option>
                  <option value="docs/Add-on-bill.pdf" data-pages="3">Add-on / Solar (NEM) bill (example)</option>
                  <option value="docs/Laminate-1-2.pdf" data-pages="2">Laminate quick reference</option>
                </select>
                <span class="pagePill" id="fileHint">Loads in viewer below</span>
              </div>

              <div class="controls">
                <button class="btn btnSmall" id="openNew" title="Optional: open PDF in a new tab">Open</button>
                <button class="btn btnSmall" id="prevBtn">Prev</button>
                <button class="btn btnSmall btnPrimary" id="nextBtn">Next</button>
              </div>
            </div>

            <div class="divider"></div>

            <div class="pageRow">
              <span class="pagePill">Page <b id="pageNum">1</b> / <b id="pageMax">6</b></span>
              <input type="range" id="pageSlider" min="1" max="6" value="1" />
              <button class="btn btnSmall" id="fitBtn" title="Toggle zoom mode">Fit</button>
            </div>

            <div class="divider"></div>

            <div class="pdfShell">
              <iframe id="pdfFrame" title="Bill PDF Viewer"></iframe>
            </div>
          </div>

          <!-- RIGHT: Callouts -->
          <aside class="callouts">
            <h3>Important details (what to point at)</h3>
            <p id="calloutIntro">Select a bill + page. The highlights below update automatically.</p>
            <ul class="calloutList" id="calloutList"></ul>
          </aside>
        </div>

        <div class="divider"></div>

        <details class="training" open>
          <summary>
            <span class="left"><span class="dot"></span>How to run this at the door (60 seconds)</span>
            <span class="caret"></span>
          </summary>
          <div class="body">
            <ul>
              <li>Ask: “Do you pay online?” If yes, have them pull the bill.</li>
              <li>Show: <b>Usage</b> first (kWh) → then TOU → then where charges come from.</li>
              <li>Close: “If the numbers don’t save you day one, we’ll stop there.”</li>
            </ul>
          </div>
        </details>

        <details class="training">
          <summary>
            <span class="left"><span class="dot"></span>Non-negotiable: what to collect every time</span>
            <span class="caret"></span>
          </summary>
          <div class="body">
            <ul>
              <li>Most recent <b>usage (kWh)</b> + trend (if shown)</li>
              <li><b>Rate plan</b> / TOU schedule</li>
              <li><b>Delivery vs Generation</b> charges</li>
              <li>Any <b>Tier/Baseline</b> info</li>
              <li>Solar/NEM status if they already have solar</li>
            </ul>
          </div>
        </details>
      </section>

      <!-- APPROACH -->
      <section class="card" id="approach">
        <div class="cardHeader">
          <h2 class="cardTitle">Approach</h2>
          <span class="tag">Trust + pace</span>
        </div>
        <p class="cardText">
          Short + calm. You’re not there to explain everything—just earn the sit-down.
        </p>

        <details class="training" open>
          <summary>
            <span class="left"><span class="dot"></span>Structure: Intro → Problem → Solution → Transition → Assume sale</span>
            <span class="caret"></span>
          </summary>
          <div class="body">
            <ul>
              <li><b>Intro:</b> who you are + why you’re here</li>
              <li><b>Problem:</b> TOU peak pricing + rising rates</li>
              <li><b>Solution:</b> solar + battery = store + avoid peak</li>
              <li><b>Transition:</b> “Let’s verify savings with your bill.”</li>
              <li><b>Assume sale:</b> give 2 time options</li>
            </ul>
          </div>
        </details>

        <details class="training">
          <summary>
            <span class="left"><span class="dot"></span>Tone + eye contact + hand motions</span>
            <span class="caret"></span>
          </summary>
          <div class="body">
            <ul>
              <li>Speak slightly slower than normal (sounds confident).</li>
              <li>Hands visible, relaxed, slow movements.</li>
              <li>Eye contact on questions, softer while listening.</li>
            </ul>
          </div>
        </details>
      </section>

      <!-- SELF IMPROVEMENT -->
      <section class="card" id="self">
        <div class="cardHeader">
          <h2 class="cardTitle">Self Improvement</h2>
          <span class="tag">Weekly habits</span>
        </div>
        <p class="cardText">
          Great reps become disciplined people. Add your favorite links here.
        </p>

        <details class="training" open>
          <summary>
            <span class="left"><span class="dot"></span>Weekly rep challenge</span>
            <span class="caret"></span>
          </summary>
          <div class="body">
            <ul>
              <li>10 minutes/day: practice the intro + close out loud.</li>
              <li>Every session: collect usage/bill on every strong lead.</li>
              <li>Weekly: review 3 bills line-by-line until it’s automatic.</li>
            </ul>
          </div>
        </details>

        <details class="training">
          <summary>
            <span class="left"><span class="dot"></span>Links (examples)</span>
            <span class="caret"></span>
          </summary>
          <div class="body">
            <ul>
              <li><a href="https://www.youtube.com/results?search_query=active+listening+skills" target="_blank" rel="noopener">Active listening</a></li>
              <li><a href="https://www.youtube.com/results?search_query=habit+building+system" target="_blank" rel="noopener">Habit building</a></li>
              <li><a href="https://www.youtube.com/results?search_query=sleep+habits+for+performance" target="_blank" rel="noopener">Sleep + performance</a></li>
            </ul>
          </div>
        </details>
      </section>
    </section>

    <div class="footer">
      <div>© LOS Training Hub</div>
      <div>
        Put PDFs in <b>/docs</b> and your logo in <b>/assets/logo.png</b>.
      </div>
    </div>
  </main>

  <script>
    // ===== Bills + Callouts (per file + per page) =====
    // NOTE: Page counts are set in the <option data-pages="..."> values.

    const CALLOUTS = {
      "docs/Yucaipa.pdf": {
        intro: "Standard SCE bill example. Focus: TOU schedule, usage, and Delivery vs Generation.",
        pages: {
          1: [
            ["TOU schedule / peak window", "Find the TOU period box (peak vs off-peak). Explain: it’s not just how much, it’s WHEN."],
            ["Rate plan name", "Point out the current rate plan so you can talk TOU properly."]
          ],
          2: [
            ["Usage trend", "Use the trend chart to connect lifestyle (EV/pool/AC) to rising costs."],
            ["Total kWh", "This number drives system sizing and savings math."]
          ],
          3: [
            ["Details of new charges", "Teach the split: Delivery charges vs Generation charges."],
            ["Line items", "Explain: delivery = wires/programs; generation = energy. Two buckets."]
          ],
          4: [
            ["TOU kWh breakdown", "On-peak vs off-peak usage. Battery story lives here."],
            ["Peak price pain", "Reps: tie the highest price period to 4–9pm behavior."]
          ],
          5: [
            ["Payment + due date", "Keep it simple: what they pay today is the problem you solve."],
            ["Any credits/adjustments", "Briefly mention but don’t drown them in details."]
          ],
          6: [
            ["Messages / notes", "Look for plan changes, baseline notes, or special program info."]
          ]
        }
      },

      "docs/Add-on-bill.pdf": {
        intro: "Solar / NEM style bill example. Focus: annual billing/true-up concept + running balance.",
        pages: {
          1: [
            ["Solar billing / true-up", "Explain: credits & charges can settle annually (true-up)."],
            ["Month count", "Point out billing month count if shown (ex: month X of 12)."]
          ],
          2: [
            ["Credits vs charges", "Show how exports/credits can offset charges over time."],
            ["Minimum charges", "Even with solar, there can be minimum charges."]
          ],
          3: [
            ["Summary", "Keep the takeaway simple: year-long picture matters more than one month."]
          ]
        }
      },

      "docs/Laminate-1-2.pdf": {
        intro: "Quick reference / laminate. Use this for fast talking points with reps.",
        pages: {
          1: [
            ["Fast definitions", "TOU, usage, delivery vs generation — one-liners."],
            ["Appointment close", "Practice the 2-option close and keep it calm."]
          ],
          2: [
            ["Objections", "Short answers: 'Is this a scam?' 'What about roof?' 'What if I move?'"]
          ]
        }
      }
    };

    // ===== Viewer wiring =====
    const billSelect = document.getElementById("billSelect");
    const pdfFrame   = document.getElementById("pdfFrame");
    const pageNumEl  = document.getElementById("pageNum");
    const pageMaxEl  = document.getElementById("pageMax");
    const slider     = document.getElementById("pageSlider");
    const prevBtn    = document.getElementById("prevBtn");
    const nextBtn    = document.getElementById("nextBtn");
    const openNew    = document.getElementById("openNew");
    const fitBtn     = document.getElementById("fitBtn");
    const calloutIntro = document.getElementById("calloutIntro");
    const calloutList  = document.getElementById("calloutList");

    // Zoom mode toggles (PDF viewer params)
    // "Fit" uses page width. "Scroll" uses default (lets user pinch zoom if supported).
    let fitMode = true;

    function getSelectedPages(){
      const opt = billSelect.options[billSelect.selectedIndex];
      const max = parseInt(opt.getAttribute("data-pages") || "1", 10);
      return isNaN(max) ? 1 : max;
    }

    function buildPdfUrl(file, page){
      // GitHub pages PDF rendering typically supports #page= + zoom/view params in the built-in viewer
      // We'll keep it simple and reliable.
      const zoom = fitMode ? "&zoom=page-width" : "";
      return `${file}#page=${page}${zoom}`;
    }

    function setCallouts(file, page){
      const data = CALLOUTS[file];
      calloutList.innerHTML = "";

      if(!data){
        calloutIntro.textContent = "No callouts configured for this file yet.";
        return;
      }

      calloutIntro.textContent = data.intro || "Use the callouts to teach the bill.";

      const list = (data.pages && data.pages[page]) ? data.pages[page] : [];
      if(list.length === 0){
        const li = document.createElement("li");
        li.className = "calloutItem";
        li.innerHTML = `<b>No specific callouts for this page</b><small>Use the bill viewer to point out usage, TOU, tiers, and where charges come from.</small>`;
        calloutList.appendChild(li);
        return;
      }

      list.forEach(([title, desc])=>{
        const li = document.createElement("li");
        li.className = "calloutItem";
        li.innerHTML = `<b>${title}</b><small>${desc}</small>`;
        calloutList.appendChild(li);
      });
    }

    function loadPdf(){
      const file = billSelect.value;
      const max = getSelectedPages();
      const page = Math.min(parseInt(slider.value,10) || 1, max);

      pageNumEl.textContent = String(page);
      pageMaxEl.textContent = String(max);

      slider.max = String(max);
      slider.value = String(page);

      pdfFrame.src = buildPdfUrl(file, page);
      setCallouts(file, page);

      // keep "Open" button accurate
      openNew.onclick = () => window.open(buildPdfUrl(file, page), "_blank", "noopener");
    }

    function setPage(p){
      const max = getSelectedPages();
      const page = Math.max(1, Math.min(max, p));
      slider.value = String(page);
      loadPdf();
    }

    billSelect.addEventListener("change", ()=>{
      slider.value = "1";
      loadPdf();
    });

    slider.addEventListener("input", ()=>{
      loadPdf();
    });

    prevBtn.addEventListener("click", ()=>{
      setPage((parseInt(slider.value,10) || 1) - 1);
    });

    nextBtn.addEventListener("click", ()=>{
      setPage((parseInt(slider.value,10) || 1) + 1);
    });

    fitBtn.addEventListener("click", ()=>{
      fitMode = !fitMode;
      fitBtn.textContent = fitMode ? "Fit" : "Zoom";
      loadPdf();
    });

    // ===== Nav active on scroll =====
    const sections = ["bill","approach","self"].map(id => document.getElementById(id));
    const links = Array.from(document.querySelectorAll("#nav a"));

    const setActive = (hash) => {
      links.forEach(a => a.classList.toggle("active", a.getAttribute("href") === hash));
    };

    const obs = new IntersectionObserver((entries) => {
      const visible = entries
        .filter(e => e.isIntersecting)
        .sort((a,b) => b.intersectionRatio - a.intersectionRatio)[0];
      if(!visible) return;
      setActive("#" + visible.target.id);
    }, { rootMargin: "-45% 0px -50% 0px", threshold: [0.1,0.2,0.3,0.4,0.5] });

    sections.forEach(s => s && obs.observe(s));

    // ===== Init =====
    loadPdf();
  </script>
</body>
</html>
