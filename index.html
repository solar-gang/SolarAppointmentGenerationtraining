<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>LOS ‚Ä¢ Bill Mastery Training</title>
  <meta name="theme-color" content="#0b1017"/>

  <!--
    ‚úÖ This index.html is built to match your CURRENT repo (root files).
    KEEP THESE FILES IN THE ROOT (same level as index.html):

      Logo.png
      Yucaipa.pdf
      Add-on-bill.pdf
      Laminate-1-2.pdf

    No folders required. No more changes needed once this is in place.
  -->

  <style>
    :root{
      /* LOS logo vibe */
      --ink:#0b1017;
      --muted:#5c6775;
      --bg:#ffffff;
      --line:#e7ecf2;

      --gold:#FBC909;
      --teal:#3AADBB;
      --cyan:#17B9FF;
      --lime:#9BE63A;

      --shadow: 0 14px 44px rgba(10,20,40,.12);
      --r:16px;
      --r2:22px;

      --safeT: env(safe-area-inset-top);
      --safeB: env(safe-area-inset-bottom);
      --safeL: env(safe-area-inset-left);
      --safeR: env(safe-area-inset-right);
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif}
    a{color:inherit}
    .container{
      max-width:1220px;margin:0 auto;
      padding:16px;
      padding-left:calc(16px + var(--safeL));
      padding-right:calc(16px + var(--safeR));
      padding-bottom:calc(16px + var(--safeB));
    }

    /* Topbar */
    .topbar{
      position:sticky;top:0;z-index:50;
      background:rgba(255,255,255,.90);
      backdrop-filter: blur(12px);
      border-bottom:1px solid var(--line);
      padding:12px 14px;
      padding-top:calc(12px + var(--safeT));
      display:flex;gap:12px;align-items:center;justify-content:space-between;
    }
    .brand{display:flex;gap:10px;align-items:center;min-width:240px}
    .logo{
      width:44px;height:44px;object-fit:contain;border-radius:12px;
      border:1px solid var(--line);background:#fff
    }
    .brandTitle{font-weight:950;letter-spacing:.2px}
    .brandSub{font-size:12px;color:var(--muted);margin-top:2px}
    .nav{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end;align-items:center}
    .nav a{
      text-decoration:none;font-size:14px;color:var(--muted);
      padding:9px 12px;border-radius:999px;border:1px solid var(--line);
      background:#fff;white-space:nowrap;
      transition:transform .12s ease,border-color .12s ease,color .12s ease;
    }
    .nav a:hover{border-color:#cfd8e3;color:var(--ink);transform:translateY(-1px)}
    .nav a.active{color:var(--ink);border-color:rgba(58,173,187,.55);box-shadow:0 10px 24px rgba(58,173,187,.12)}

    /* Hero */
    .hero{
      margin-top:14px;
      border:1px solid var(--line);
      border-radius:var(--r2);
      box-shadow:var(--shadow);
      padding:16px;
      background:
        radial-gradient(1100px 520px at 12% 0%, rgba(251,201,9,.22), transparent 55%),
        radial-gradient(900px 520px at 88% 10%, rgba(58,173,187,.18), transparent 55%),
        linear-gradient(135deg, rgba(251,201,9,.12), rgba(58,173,187,.10));
    }
    .hero h1{margin:0 0 8px;font-size:24px}
    .hero p{margin:0;color:var(--muted);line-height:1.45}
    .pillRow{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
    .pill{font-size:12px;padding:7px 10px;border-radius:999px;border:1px solid var(--line);background:#fff;color:var(--muted)}

    /* Cards */
    .grid{
      margin-top:12px;
      display:grid;
      grid-template-columns:repeat(12,1fr);
      gap:12px;
    }
    .card{
      grid-column:span 12;
      border:1px solid var(--line);
      border-radius:var(--r2);
      background:#fff;
      box-shadow:var(--shadow);
      padding:14px;
    }
    .cardHeader{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
    .cardTitle{font-weight:950;margin:0;font-size:18px}
    .tag{
      font-size:12px;color:var(--muted);
      border:1px solid var(--line);
      border-radius:999px;padding:7px 10px;background:#fff;white-space:nowrap;
    }
    .cardText{color:var(--muted);line-height:1.45;margin-top:8px}
    .divider{height:1px;background:var(--line);margin:12px 0}

    /* Viewer + right panel */
    .viewerWrap{display:grid;gap:12px}
    .viewerHeader{
      display:flex;flex-wrap:wrap;gap:10px;
      align-items:center;justify-content:space-between;
    }
    .selectRow{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    select{
      appearance:none;
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px 12px;
      font-size:14px;
      background:#fff;
      color:var(--ink);
      box-shadow:0 8px 18px rgba(10,20,40,.06);
    }
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
    .btn{
      border:1px solid var(--line);
      background:#fff;
      color:var(--ink);
      padding:10px 12px;
      border-radius:12px;
      font-weight:900;
      cursor:pointer;
      box-shadow:0 8px 18px rgba(10,20,40,.06);
      transition:transform .12s ease, border-color .12s ease;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px);border-color:#cfd8e3}
    .btnPrimary{
      background:linear-gradient(135deg,var(--gold),var(--teal));
      border-color:transparent;
    }
    .btnSmall{padding:8px 10px;border-radius:10px;font-weight:900}

    .pageRow{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    input[type="range"]{width:220px;max-width:70vw}
    .pagePill{
      font-size:12px;color:var(--muted);
      border:1px solid var(--line);
      border-radius:999px;padding:7px 10px;background:#fff;white-space:nowrap;
    }

    .pdfShell{
      border:1px solid var(--line);
      border-radius:var(--r2);
      overflow:hidden;
      background:#0b1017;
      box-shadow:var(--shadow);
      height:62vh;min-height:420px;
    }
    .pdfShell iframe{width:100%;height:100%;border:0;background:#0b1017}

    .side{
      border:1px solid var(--line);
      border-radius:var(--r2);
      background:#fff;
      box-shadow:var(--shadow);
      padding:14px;
    }
    .side h3{margin:0 0 6px;font-size:16px}
    .side p{margin:0;color:var(--muted);line-height:1.45}
    .list{margin:10px 0 0 0;padding:0;list-style:none;display:grid;gap:10px}
    .item{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:
        radial-gradient(600px 220px at 0% 0%, rgba(251,201,9,.10), transparent 55%),
        radial-gradient(600px 220px at 100% 0%, rgba(58,173,187,.08), transparent 55%),
        #fff;
    }
    .item b{color:var(--ink)}
    .item small{display:block;color:var(--muted);margin-top:6px;line-height:1.35}

    /* Fun / quick script */
    .script{
      border:1px dashed rgba(58,173,187,.55);
      background:rgba(58,173,187,.08);
      border-radius:14px;
      padding:12px;
      margin-top:12px;
      color:var(--ink);
      line-height:1.45;
    }
    .script strong{display:block;margin-bottom:6px}
    .kbd{
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;
      font-size:12px;
      padding:2px 7px;border:1px solid var(--line);border-radius:8px;background:#fff;color:var(--muted)
    }

    /* Calculator */
    .calcGrid{display:grid;gap:10px;margin-top:10px}
    .calcRow{display:grid;gap:10px}
    .field{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:#fff;
      box-shadow:0 8px 18px rgba(10,20,40,.06);
    }
    .field label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px;font-weight:900;letter-spacing:.02em}
    .field input{
      width:100%;
      border:1px solid var(--line);
      border-radius:12px;
      padding:12px 12px;
      font-size:16px;
      outline:none;
    }
    .result{
      border:1px solid rgba(155,230,58,.45);
      background:rgba(155,230,58,.12);
      border-radius:14px;
      padding:12px;
      font-weight:950;
    }
    .result .big{font-size:22px}
    .mini{font-size:12px;color:var(--muted);font-weight:800;margin-top:6px;line-height:1.35}

    .footer{
      margin:16px 0 10px;
      color:var(--muted);
      font-size:12px;
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;
    }

    @media (min-width: 980px){
      .hero h1{font-size:30px}
      .viewerWrap{grid-template-columns: 7fr 5fr;align-items:start}
      .pdfShell{height:70vh;min-height:520px}
      .calcRow{grid-template-columns:1fr 1fr}
    }
  </style>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <!-- Uses your CURRENT filename in repo root -->
      <img src="Logo.png" class="logo" alt="Leverage Our Sun"/>
      <div>
        <div class="brandTitle">LOS Bill Mastery Training</div>
        <div class="brandSub">Understand the bill ‚Üí solve the problem ‚Üí book the consult</div>
      </div>
    </div>

    <nav class="nav" id="nav">
      <a href="#bill" class="active">Bills</a>
      <a href="#kwh">$/kWh</a>
      <a href="#close">Close</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <h1>Make the bill simple (and fun).</h1>
      <p>
        Pick a bill type, flip through pages inside the viewer, and use the callouts to teach homeowners
        <b>why rates feel crazy</b>‚Äîthen position the right solution:
        <b>solar</b> (non-solar homes) or <b>solar + batteries</b> (solar homes that still get hit at peak).
      </p>
      <div class="pillRow">
        <span class="pill">Stays in one window</span>
        <span class="pill">Mobile + iPad + desktop</span>
        <span class="pill">Callouts per page</span>
      </div>
    </section>

    <section class="grid">
      <!-- BILL VIEWER -->
      <section class="card" id="bill">
        <div class="cardHeader">
          <h2 class="cardTitle">Bill Viewer + Training Callouts</h2>
          <span class="tag">Use at the door</span>
        </div>
        <p class="cardText">
          This loads your PDFs from the repo root: <b>Yucaipa.pdf</b>, <b>Add-on-bill.pdf</b>, <b>Laminate-1-2.pdf</b>.
          No folders. No extra setup.
        </p>

        <div class="divider"></div>

        <div class="viewerWrap">
          <!-- LEFT -->
          <div>
            <div class="viewerHeader">
              <div class="selectRow">
                <select id="billSelect" aria-label="Choose bill PDF">
                  <option value="Yucaipa.pdf" data-pages="6" selected>Non-Solar Utility Bill (Yucaipa)</option>
                  <option value="Add-on-bill.pdf" data-pages="3">Solar / NEM Bill (Add-on)</option>
                  <option value="Laminate-1-2.pdf" data-pages="2">Cheat Sheet (Laminate)</option>
                </select>
                <span class="pagePill" id="hint">Loads below ‚Äî same window</span>
              </div>

              <div class="controls">
                <button class="btn btnSmall" id="openNew" title="Optional: open PDF in a new tab">Open</button>
                <button class="btn btnSmall" id="prevBtn">Prev</button>
                <button class="btn btnSmall btnPrimary" id="nextBtn">Next</button>
              </div>
            </div>

            <div class="divider"></div>

            <div class="pageRow">
              <span class="pagePill">Page <b id="pageNum">1</b> / <b id="pageMax">6</b></span>
              <input type="range" id="pageSlider" min="1" max="6" value="1"/>
              <button class="btn btnSmall" id="fitBtn" title="Toggle zoom mode">Fit</button>
            </div>

            <div class="divider"></div>

            <div class="pdfShell">
              <iframe id="pdfFrame" title="Bill PDF Viewer"></iframe>
            </div>

            <div class="script" style="margin-top:12px">
              <strong>Door flow (60 seconds):</strong>
              ‚ÄúReal quick‚Äîyour bill is expensive for two reasons: <b>how much</b> you use and <b>when</b> you use it.
              If you‚Äôre open to it, let‚Äôs schedule a <span class="kbd">30‚Äì45 min</span> consult to verify usage and show
              whether solar (and possibly batteries) gives you <b>day-one savings</b>. If it doesn‚Äôt, we stop there.‚Äù
            </div>
          </div>

          <!-- RIGHT -->
          <aside class="side">
            <h3>What to point at (changes by page)</h3>
            <p id="calloutIntro">Select a bill + page. The callouts below update automatically.</p>
            <ul class="list" id="calloutList"></ul>

            <div class="divider"></div>

            <h3 style="margin:0 0 6px">Quick teaching goal</h3>
            <div class="item">
              <b>Non-solar home</b>
              <small>Explain usage + TOU + ‚Äúwhere charges come from‚Äù ‚Üí position solar (and battery if peak pain is heavy).</small>
            </div>
            <div class="item">
              <b>Solar home (still paying)</b>
              <small>Explain TOU + peak buying + true-up ‚Üí position batteries as ‚Äúcontrolled peak buying.‚Äù</small>
            </div>
          </aside>
        </div>
      </section>

      <!-- $/KWH -->
      <section class="card" id="kwh">
        <div class="cardHeader">
          <h2 class="cardTitle">$/kWh Calculator</h2>
          <span class="tag">Fun & simple</span>
        </div>
        <p class="cardText">
          Teach reps to calculate <b>price per kWh</b> fast. This helps them explain the bill in plain language:
          ‚ÄúYou‚Äôre paying about <b>$X per kWh</b> right now.‚Äù
        </p>

        <div class="calcGrid">
          <div class="calcRow">
            <div class="field">
              <label>Monthly bill amount ($)</label>
              <input id="billAmount" inputmode="decimal" placeholder="Example: 333.92"/>
            </div>
            <div class="field">
              <label>Monthly usage (kWh)</label>
              <input id="kwhUsage" inputmode="decimal" placeholder="Example: 1258"/>
            </div>
          </div>

          <div class="calcRow">
            <button class="btn btnPrimary" id="calcBtn" style="width:100%">Calculate $/kWh</button>
            <div class="result" id="calcOut">
              <div class="big">Enter bill + kWh</div>
              <div class="mini">Tip: pull the ‚ÄúTotal usage (kWh)‚Äù number from the usage/details pages.</div>
            </div>
          </div>

          <div class="script">
            <strong>Rep one-liner:</strong>
            ‚ÄúIf your bill is <span class="kbd">$BILL</span> and you used <span class="kbd">KWH</span>,
            you‚Äôre paying about <b>$BILL √∑ KWH</b> per kWh‚Äîthen TOU makes the peak hours even more expensive.‚Äù
          </div>
        </div>
      </section>

      <!-- CLOSE -->
      <section class="card" id="close">
        <div class="cardHeader">
          <h2 class="cardTitle">Appointment Close</h2>
          <span class="tag">Assume sale</span>
        </div>
        <p class="cardText">Keep it calm. Give two options. No pressure.</p>

        <div class="script">
          <strong>Two-option close:</strong>
          ‚ÄúDo you prefer <span class="kbd">today at 6:30</span> or <span class="kbd">tomorrow at 4:00</span> for the consult?‚Äù
        </div>

        <div class="script">
          <strong>Safety close (reduces fear):</strong>
          ‚ÄúIf it doesn‚Äôt save you day one, we‚Äôll tell you and stop there.‚Äù
        </div>
      </section>
    </section>

    <div class="footer">
      <div>¬© Leverage Our Sun ‚Ä¢ Training Hub</div>
      <div>Files used: Logo.png ‚Ä¢ Yucaipa.pdf ‚Ä¢ Add-on-bill.pdf ‚Ä¢ Laminate-1-2.pdf</div>
    </div>
  </main>

  <script>
    // ===== Root-file PDF viewer + page callouts =====
    // Matches your current repo filenames exactly.

    const CALLOUTS = {
      "Yucaipa.pdf": {
        intro: "Non-solar utility bill. Focus: Usage ‚Üí TOU (when) ‚Üí Delivery vs Generation (where charges come from).",
        pages: {
          1: [
            ["Rate plan / TOU basics", "Find the rate plan and any TOU schedule. Teach: it‚Äôs not just how much‚Äîit‚Äôs WHEN."],
            ["What changed / messages", "Look for notes about plan, baseline, or billing messages."]
          ],
          2: [
            ["Usage trend", "Use charts to connect EV/pool/AC to rising costs."],
            ["Total kWh", "This number drives design + savings math."]
          ],
          3: [
            ["Details of new charges", "Teach the split: Delivery charges vs Generation charges."],
            ["Line items", "Delivery = wires/programs. Generation = energy. Two buckets."]
          ],
          4: [
            ["TOU kWh breakdown", "On-peak vs off-peak usage. Battery story lives here."],
            ["Peak pain", "Tie behavior 4‚Äì9pm to peak buying."]
          ],
          5: [
            ["Amount due + due date", "Keep it simple: what they pay today is the pain you solve."],
            ["Credits/adjustments", "Mention briefly‚Äîdon‚Äôt overwhelm."]
          ],
          6: [
            ["Summary / notes", "Check for baseline allowance, service voltage, program notes."]
          ]
        }
      },

      "Add-on-bill.pdf": {
        intro: "Solar / NEM style bill. Focus: credits vs charges + true-up + why batteries stop peak buying.",
        pages: {
          1: [
            ["True-up concept", "Teach: solar billing can settle annually‚Äîmonth-to-month can look weird."],
            ["Minimum charges", "Even with solar, there can be minimum charges."]
          ],
          2: [
            ["Credits vs charges", "Exports create credits, imports create charges. TOU decides value."],
            ["Peak buying problem", "If they buy during peak, solar alone may not protect them."]
          ],
          3: [
            ["Big takeaway", "Batteries = controlled peak buying + outage protection."]
          ]
        }
      },

      "Laminate-1-2.pdf": {
        intro: "Cheat sheet. Use for quick talk tracks and practice.",
        pages: {
          1: [
            ["Definitions", "TOU, usage, delivery vs generation‚Äîsimple one-liners."],
            ["Appointment close", "Practice the two-option close."]
          ],
          2: [
            ["Objections", "Short answers that keep you in control and move to the consult."]
          ]
        }
      }
    };

    const billSelect  = document.getElementById("billSelect");
    const pdfFrame    = document.getElementById("pdfFrame");
    const pageNumEl   = document.getElementById("pageNum");
    const pageMaxEl   = document.getElementById("pageMax");
    const slider      = document.getElementById("pageSlider");
    const prevBtn     = document.getElementById("prevBtn");
    const nextBtn     = document.getElementById("nextBtn");
    const openNew     = document.getElementById("openNew");
    const fitBtn      = document.getElementById("fitBtn");
    const calloutIntro= document.getElementById("calloutIntro");
    const calloutList = document.getElementById("calloutList");

    let fitMode = true;

    function getMaxPages(){
      const opt = billSelect.options[billSelect.selectedIndex];
      const n = parseInt(opt.getAttribute("data-pages") || "1", 10);
      return isNaN(n) ? 1 : n;
    }

    function buildPdfUrl(file, page){
      const zoom = fitMode ? "&zoom=page-width" : "";
      return `${file}#page=${page}${zoom}`;
    }

    function setCallouts(file, page){
      calloutList.innerHTML = "";
      const data = CALLOUTS[file];
      if(!data){
        calloutIntro.textContent = "No callouts configured for this file yet.";
        return;
      }
      calloutIntro.textContent = data.intro || "Use the callouts to teach the bill.";
      const list = (data.pages && data.pages[page]) ? data.pages[page] : [];
      if(list.length === 0){
        const li = document.createElement("li");
        li.className = "item";
        li.innerHTML = `<b>No specific callouts for this page</b><small>Point out usage, TOU, tiers, and where charges come from.</small>`;
        calloutList.appendChild(li);
        return;
      }
      list.forEach(([title, desc])=>{
        const li = document.createElement("li");
        li.className = "item";
        li.innerHTML = `<b>${title}</b><small>${desc}</small>`;
        calloutList.appendChild(li);
      });
    }

    function loadPdf(){
      const file = billSelect.value;
      const max = getMaxPages();
      const page = Math.min(parseInt(slider.value,10) || 1, max);

      pageNumEl.textContent = String(page);
      pageMaxEl.textContent = String(max);
      slider.max = String(max);
      slider.value = String(page);

      pdfFrame.src = buildPdfUrl(file, page);
      setCallouts(file, page);

      openNew.onclick = () => window.open(buildPdfUrl(file, page), "_blank", "noopener");
    }

    function setPage(p){
      const max = getMaxPages();
      const page = Math.max(1, Math.min(max, p));
      slider.value = String(page);
      loadPdf();
    }

    billSelect.addEventListener("change", ()=>{ slider.value="1"; loadPdf(); });
    slider.addEventListener("input", loadPdf);
    prevBtn.addEventListener("click", ()=> setPage((parseInt(slider.value,10)||1)-1));
    nextBtn.addEventListener("click", ()=> setPage((parseInt(slider.value,10)||1)+1));
    fitBtn.addEventListener("click", ()=>{
      fitMode = !fitMode;
      fitBtn.textContent = fitMode ? "Fit" : "Zoom";
      loadPdf();
    });

    // $/kWh calculator
    const billAmount = document.getElementById("billAmount");
    const kwhUsage   = document.getElementById("kwhUsage");
    const calcBtn    = document.getElementById("calcBtn");
    const calcOut    = document.getElementById("calcOut");

    function calcKwh(){
      const b = parseFloat((billAmount.value || "").replace(/[^0-9.]/g,""));
      const k = parseFloat((kwhUsage.value || "").replace(/[^0-9.]/g,""));
      if(!isFinite(b) || !isFinite(k) || b<=0 || k<=0){
        calcOut.innerHTML = `<div class="big">Enter valid numbers</div><div class="mini">Example: $333.92 and 1258 kWh</div>`;
        return;
      }
      const p = b / k;
      const nice = p.toFixed(2);

      let vibe = "Solid.";
      if(p >= 0.40) vibe = "üî• High. Peak hours are crushing them.";
      else if(p >= 0.30) vibe = "‚ö° Elevated. TOU + delivery charges add up.";
      else vibe = "‚úÖ Manageable, but rates usually rise.";

      calcOut.innerHTML =
        `<div class="big">$${nice} <span style="font-weight:950">per kWh</span></div>
         <div class="mini">${vibe} Teach: ‚ÄúYou‚Äôre paying about <b>$${nice}</b> for every kWh you use.‚Äù</div>`;
    }

    calcBtn.addEventListener("click", calcKwh);

    // Nav highlight on scroll
    const sections = ["bill","kwh","close"].map(id => document.getElementById(id));
    const links = Array.from(document.querySelectorAll("#nav a"));
    const setActive = (hash)=> links.forEach(a => a.classList.toggle("active", a.getAttribute("href")===hash));

    const obs = new IntersectionObserver((entries)=>{
      const visible = entries.filter(e=>e.isIntersecting).sort((a,b)=>b.intersectionRatio-a.intersectionRatio)[0];
      if(!visible) return;
      setActive("#"+visible.target.id);
    }, { rootMargin: "-45% 0px -50% 0px", threshold:[0.1,0.2,0.3,0.4,0.5] });

    sections.forEach(s => s && obs.observe(s));

    // Init
    loadPdf();
  </script>
</body>
</html>
